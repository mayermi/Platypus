<div class="modification">
  <main class="modification__main" [ngClass]="'modification__main--' + getType()">
    <div class="modification__text">
      <markdown [content]="modification.text"></markdown>
    </div>

    <div class="modification__reasoning">
      <h4 class="modification__reasoning__title">
        Reasoning
      </h4>

      <div class="modification__reasoning__content">
        <markdown [content]="modification.reasoning"></markdown>
      </div>
    </div>

    <p class="modification__byline">
      by <strong>{{modification.user.username}}</strong> on {{modification.createdAt}}
    </p>

    <div class="modification__actions">
      <div>
        <custom-button type="secondary" (click)="showAdditionForm()" *ngIf="!isAdditionFormVisible">
          Add to this
        </custom-button>
      </div>

      <reactions [reactions]="modification.reactions" (onDislike)="dislike()" (onLike)="like()"></reactions>
    </div>
  </main>

  <div class="modification__additions" *ngIf="hasLoadedAdditions">
    <addition [addition]="addition" [idea]="idea" [modification]="modification" *ngFor="let addition of modification.additions"></addition>
  </div>

  <div class="modification__addition-form" *ngIf="isAdditionFormVisible">
    <label for="addition">
      Add something to this modification
    </label>

    <input-block>
      <label for="text">
        Text
      </label>

      <textarea autofocus id="text" placeholder="Text" [(ngModel)]="addition.text"></textarea>
    </input-block>

    <input-block>
      <label for="reasoning">
        Reasoning
      </label>

      <textarea id="reasoning" placeholder="Reasoning" [(ngModel)]="addition.reasoning"></textarea>
    </input-block>

    <add-block-controls (onCancel)="hideAdditionForm()" (onSave)="saveAddition()"></add-block-controls>
  </div>
</div>
